# Chapter 7. ë°ì´í„° ì•”í˜¸í™”

- MySQL 8.0 ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œë˜ë©´ì„œ ë°ì´í„° íŒŒì¼ë¿ë§Œ ì•„ë‹ˆë¼ ë¦¬ë‘ ë¡œê·¸ë‚˜ ì–¸ë‘ ë¡œê·¸, ë³µì œë¥¼ ìœ„í•œ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ë“±ë„ ëª¨ë‘ ì•”í˜¸í™” ê¸°ëŠ¥ì„ ì§€ì›í•˜ê¸° ì‹œìž‘í–ˆë‹¤.
    - 5.7 ë²„ì „ë¶€í„° ì§€ì›ë˜ê¸° ì‹œìž‘í•œ ë°ì´í„° ì•”í˜¸í™” ê¸°ëŠ¥ì€ ì²˜ìŒì—ëŠ” ë°ì´í„° íŒŒì¼(í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤)ì— ëŒ€í•´ì„œë§Œ ì•”í˜¸í™” ê¸°ëŠ¥ì´ ì œê³µëë‹¤.
- ì‘ìš©í”„ë¡œê·¸ëž¨ì˜ ì•”í˜¸í™”ëŠ” ì£¼ë¡œ ì¤‘ìš” ì •ë³´ë¥¼ ê°€ì§„ ì»¬ëŸ¼ ë‹¨ìœ„ë¡œ ì•”í˜¸í™”ë¥¼ ìˆ˜í–‰í•˜ë©°, ë°ì´í„°ë² ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œëŠ” í…Œì´ë¸” ë‹¨ìœ„ë¡œ ì•”í˜¸í™”ë¥¼ ì ìš©í•œë‹¤.


## 1. MySQL ì„œë²„ì˜ ë°ì´í„° ì•”í˜¸í™”

- MySQL ì„œë²„ì˜ ì•”í˜¸í™” ê¸°ëŠ¥ì€ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ì™€ ë””ìŠ¤í¬ ì‚¬ì´ì˜ ë°ì´í„° ì½ê³  ì“°ê¸° ì§€ì ì—ì„œ ì•”í˜¸í™” ë˜ëŠ” ë³µí˜¸í™”ë¥¼ ìˆ˜í–‰í•œë‹¤.
    - ê·¸ ì™¸ì˜ ë¶€ë¶„ì—ì„œëŠ” ì•”í˜¸í™” ì²˜ë¦¬ê°€ ì „í˜€ í•„ìš”ì¹˜ ì•Šë‹¤.
    - ì¦‰, MySQL ì„œë²„(InnoDB ìŠ¤í† ë¦¬ì§€ ì—”ì§„)ì˜ I/O ë ˆì´ì–´ì—ì„œë§Œ ë°ì´í„°ì˜ ì•”í˜¸í™” ë° ë³µí˜¸í™” ê³¼ì •ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ë‹¤.

![Untitled](./images/Untitled.png)

- TDE(Transparent Data Encryption): ë°ì´í„° ì•”í˜¸í™” ê¸°ëŠ¥ì´ í™œì„±í™”ë¼ ìžˆë‹¤ê³  í•˜ë”ë¼ë„ MySQL ë‚´ë¶€ì™€ ì‚¬ìš©ìž ìž…ìž¥ì—ì„œëŠ” ì•„ë¬´ëŸ° ì°¨ì´ê°€ ì—†ëŠ” ì•”í˜¸í™” ë°©ì‹
    - "Data at Rest Encryption"ë¼ê³ ë„ í•˜ëŠ”ë°, ì—¬ê¸°ì„œ "Data at Rest"ëŠ” ë©”ëª¨ë¦¬(In-Process)ë‚˜ ë„¤íŠ¸ì›Œí¬ ì „ì†¡(InTransit) ë‹¨ê³„ê°€ ì•„ë‹Œ ë””ìŠ¤í¬ì— ì €ìž¥(At Rest)ëœ ë‹¨ê³„ì—ì„œë§Œ ì•”í˜¸í™”ëœë‹¤ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ëŠ” í‘œí˜„ì´ë‹¤.

### 1-1. 2ë‹¨ê³„ í‚¤ ê´€ë¦¬

---

- MySQL ì„œë²„ì˜ TDE ì—ì„œ ì•”í˜¸í™”ëŠ” í‚¤ë§ í”ŒëŸ¬ê·¸ì¸ì— ì˜í•´ ê´€ë¦¬ëœë‹¤.
- MySQL 8.0 ë²„ì „ì—ì„œ ì§€ì›ë˜ëŠ” í‚¤ë§ í”ŒëŸ¬ê·¸ì¸
    1. `keyring_file` File-Based í”ŒëŸ¬ê·¸ì¸ (ì»¤ë®¤ë‹ˆí‹° ì—ë””ì…˜ ì‚¬ìš©ê°€ëŠ¥)
    2. `keyring_encrypted_file` Keyring í”ŒëŸ¬ê·¸ì¸
    3. `keyring_okv` KMIP í”ŒëŸ¬ê·¸ì¸
    4. `keyring_aws` Amazon Web Services Keyring í”ŒëŸ¬ê·¸ì¸

ðŸ‘‰Â ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸ì´ ì œê³µë˜ì§€ë§Œ ë§ˆìŠ¤í„° í‚¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ë§Œ ë‹¤ë¥¼ ë¿ MySQL ì„œë²„ ë‚´ë¶€ì ìœ¼ë¡œ ìž‘ë™í•˜ëŠ” ë°©ì‹ì€ ëª¨ë‘ ë™ì¼í•˜ë‹¤.

- í‚¤ë§ í”ŒëŸ¬ê·¸ì¸ì€ 2ë‹¨ê³„ í‚¤ ê´€ë¦¬ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.
    
    ![Untitled](./images/Untitled%201.png)
    
    - ë§ˆìŠ¤í„° í‚¤ì™€ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤(í”„ë¼ì´ë¹— í‚¤)ë¼ëŠ” ë‘ ê°€ì§€ ì¢…ë¥˜ì˜ í‚¤
        - HashiCorp Vault ê°™ì€ ì™¸ë¶€ í‚¤ ê´€ë¦¬ ì†”ë£¨ì…˜ ë˜ëŠ” ë””ìŠ¤í¬ì˜ íŒŒì¼ì—ì„œ ë§ˆìŠ¤í„° í‚¤ë¥¼ ê°€ì ¸ì˜¤ê³ ,
        - ì•”í˜¸í™”ëœ í…Œì´ë¸”ì´ ìƒì„±ë  ë•Œë§ˆë‹¤ í•´ë‹¹ í…Œì´ë¸”ì„ ìœ„í•œ ìž„ì˜ì˜ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ë¥¼ ë°œê¸‰í•œë‹¤.
    - MySQL ì„œë²„ëŠ” ë§ˆìŠ¤í„° í‚¤ë¥¼ ì´ìš©í•´ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤í‚¤ë¥¼ ì•”í˜¸í™”í•´ì„œ ê° í…Œì´ë¸”ì˜ ë°ì´í„° íŒŒì¼ í—¤ë”ì— ì €ìž¥í•œë‹¤.
    - ìƒì„±ëœ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ëŠ” í…Œì´ë¸”ì´ ì‚­ì œë˜ì§€ ì•ŠëŠ” ì´ìƒ ì ˆëŒ€ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ëŠ” ì ˆëŒ€ MySQL ì„œë²„ ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ì§€ ì•Šê¸°ì— ì£¼ê¸°ì ìœ¼ë¡œ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë³´ì•ˆìƒ ì·¨ì•½ì ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
    - í•˜ì§€ë§Œ ë§ˆìŠ¤í„° í‚¤ëŠ” ì™¸ë¶€ íŒŒì¼ì„ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— ë…¸ì¶œ ê°€ëŠ¥ì„±ì´ ìžˆì–´ ì£¼ê¸°ì ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•œë‹¤.
        
        ```bash
        mysql> ALTER INSTANCE ROTATE INNODB MASTER KEY;
        ```
        
        - ë§ˆìŠ¤í„° í‚¤ë¥¼ ë³€ê²½í•˜ë©´ MySQL ì„œë²„ëŠ” ê¸°ì¡´ì˜ ë§ˆìŠ¤í„° í‚¤ë¥¼ ì´ìš©í•´ ê° í…Œì´ë¸”ì˜ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ë¥¼ ë³µí˜¸í™”í•œ ë‹¤ìŒ ìƒˆë¡œìš´ ë§ˆìŠ¤í„° í‚¤ë¡œ ë‹¤ì‹œ ì•”í˜¸í™”í•œë‹¤. ë§ˆìŠ¤í„° í‚¤ê°€ ë³€ê²½ë˜ëŠ” ë™ì•ˆ MySQL ì„œë²„ì˜ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ ìžì²´ì™€ ë°ì´í„° íŒŒì¼ì˜ ë°ì´í„°ëŠ” ì „í˜€ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ðŸ‘‰Â MySQL ì„œë²„ì—ì„œ ì´ë ‡ê²Œ 2ë‹¨ê³„ ì•”í˜¸í™” ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì•”í˜¸í™” í‚¤ ë³€ê²½ìœ¼ë¡œ ì¸í•œ ê³¼ë„í•œ ì‹œìŠ¤í…œ ë¶€í•˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ì„œë‹¤.
    - ë§Œì•½ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ê°€ ë³€ê²½ëœë‹¤ë©´ ë°ì´í„° íŒŒì¼ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë³µí˜¸í™”í–ˆë‹¤ê°€ ë‹¤ì‹œ ì•”í˜¸í™”í•´ì•¼ í•˜ëŠ” ë¶€í•˜ë¥¼ ê°–ê²Œ ëœë‹¤.
- TDE ì—ì„œ ì§€ì›ë˜ëŠ” ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì€ AES 256 ë¹„íŠ¸ì´ë©°, ì´ì™¸ì˜ ì•Œê³ ë¦¬ì¦˜ì€ ì§€ì›ë˜ì§€ ì•ŠëŠ”ë‹¤.
    - í…Œì´ë¸” ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ëŠ” AES-256 ECB ì•Œê³ ë¦¬ì¦˜ì„ ì´ìš©í•´ ì•”í˜¸í™”ë˜ê³ ,
    - ì‹¤ì œ ë°ì´í„° íŒŒì¼ì€ AES-256 CBC ì•Œê³ ë¦¬ì¦˜ì„ ì´ìš©í•´ ì•”í˜¸í™”ëœë‹¤.

### 1-2. ì•”í˜¸í™”ì™€ ì„±ëŠ¥

---

- MySQL ì„œë²„ì˜ ì•”í˜¸í™”ëŠ” TDE ë°©ì‹ì´ê¸° ë•Œë¬¸ì— ë””ìŠ¤í¬ë¡œë¶€í„° í•œ ë²ˆ ì½ì€ ë°ì´í„° íŽ˜ì´ì§€ëŠ” ë³µí˜¸í™”ë˜ì–´ InnoDB ì˜ ë²„í¼ í’€ì— ì ìž¬ëœë‹¤.
    - ê·¸ëž˜ì„œ ë°ì´í„° íŽ˜ì´ì§€ê°€ í•œ ë²ˆ ë©”ëª¨ë¦¬ì— ì ìž¬ë˜ë©´ ì•”í˜¸í™”ë˜ì§€ ì•Šì€ í…Œì´ë¸”ê³¼ ë™ì¼í•œ ì„±ëŠ¥ì„ ë³´ì¸ë‹¤.
- í•˜ì§€ë§Œ ì¿¼ë¦¬ê°€ InnoDB ë²„í¼ í’€ì— ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ë°ì´í„° íŽ˜ì´ì§€ë¥¼ ì½ì–´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” ë³µí˜¸í™” ê³¼ì •ì„ ê±°ì¹˜ê¸° ë•Œë¬¸ì— ë³µí˜¸í™” ì‹œê°„ ë™ì•ˆ ì¿¼ë¦¬ ì²˜ë¦¬ê°€ ì§€ì—°ë  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì•”í˜¸í™”ëœ í…Œì´ë¸”ì´ ë³€ê²½ë˜ë©´ ë‹¤ì‹œ ë””ìŠ¤í¬ë¡œ ë™ê¸°í™”ë  ë•Œ ì•”í˜¸í™”ë¼ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë””ìŠ¤í¬ì— ì €ìž¥í•  ë•Œë„ ì¶”ê°€ë¡œ ì‹œê°„ì´ ë” ê±¸ë¦°ë‹¤.
    - í•˜ì§€ë§Œ ë°ì´í„° íŽ˜ì´ì§€ ì €ìž¥ì€ ì‚¬ìš©ìžì˜ ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì“°ë ˆë“œê°€ ì•„ë‹Œ MySQL ì„œë²„ ë°±ê·¸ë¼ìš´ë“œ ì“°ë ˆë“œê°€ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì‹¤ì œ ì‚¬ìš©ìž ì¿¼ë¦¬ê°€ ì§€ì—°ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

- ì•”í˜¸í™”í•œë‹¤ê³  í•´ì„œ InnoDB ë²„í¼ í’€ì˜ íš¨ìœ¨ì´ ë‹¬ë¼ì§€ê±°ë‚˜ ë©”ëª¨ë¦¬ ì‚¬ìš© íš¨ìœ¨ì´ ë–¨ì–´ì§€ëŠ” í˜„ìƒì€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.
    - AES ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì€ ì•”í˜¸í™” ê²°ê³¼ê°€ í‰ë¬¸ì˜ ê²°ê³¼ì™€ ë™ì¼í•œ í¬ê¸°ì˜ ì•”í˜¸ë¬¸ì„ ë°˜í™˜í•œë‹¤.
        - ì•”í˜¸í™”í•˜ê³ ìž í•˜ëŠ” í‰ë¬¸ì˜ ê¸¸ì´ê°€ ì§§ì€ ê²½ìš° ì•”í˜¸í™” í‚¤ì˜ í¬ê¸°ì— ë”°ë¼ ì•”í˜¸í™”ëœ ê²°ê³¼ì˜ ìš©ëŸ‰ì´ ë” ì»¤ì§ˆ ìˆ˜ë„ ìžˆì§€ë§Œ, ì´ë¯¸ ë°ì´í„° íŽ˜ì´ì§€ëŠ” ì•”í˜¸í™” í‚¤ë³´ë‹¤ í›¨ì”¬ í¬ë‹¤.
    
    ðŸ‘‰Â ë°ì´í„° íŒŒì¼ì˜ í¬ê¸°ëŠ” ì•”í˜¸í™”ë˜ì§€ ì•Šì€ í…Œì´ë¸”ê³¼ ë™ì¼í•œ í¬ê¸°ë¥¼ ê°€ì§„ë‹¤.
    
- ê°™ì€ í…Œì´ë¸”ì— ëŒ€í•´ ì•”í˜¸í™”ì™€ ì••ì¶•ì´ ë™ì‹œì— ì ìš©ë˜ë©´ MySQL ì„œë²„ëŠ” ì••ì¶•ì„ ë¨¼ì € ì‹¤í–‰í•˜ê³  ì•”í˜¸í™”ë¥¼ ì ìš©í•œë‹¤.
    - ì•”í˜¸í™”ëœ ê²°ê³¼ë¬¸ì€ ì•„ì£¼ ëžœë¤í•œ ë°”ì´íŠ¸ ë°°ì—´ì„ ê°€ì§€ê²Œ ë˜ëŠ”ë°, ì´ëŠ” ì••ì¶•ë¥ ì„ ìƒë‹¹ížˆ ë–¨ì–´ëœ¨ë¦°ë‹¤. ê·¸ëž˜ì„œ ìµœëŒ€í•œ ì••ì¶• íš¨ìœ¨ì„ ë†’ì´ê¸° ìœ„í•´ ì‚¬ìš©ìžì˜ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ì••ì¶•í•´ì„œ ìš©ëŸ‰ì„ ìµœì†Œí™”í•œ í›„ ì•”í˜¸í™”ë¥¼ ì ìš©í•œë‹¤.
    - ì•”í˜¸í™”ëœ í…Œì´ë¸”ì˜ ë°ì´í„° íŽ˜ì´ì§€ëŠ” ë³µí˜¸í™”ëœ ìƒíƒœë¡œ InnoDB ë²„í¼ í’€ì— ì €ìž¥ë˜ì§€ë§Œ, ì••ì¶•ëœ ë°ì´í„° íŽ˜ì´ì§€ëŠ” ì••ì¶• ë˜ëŠ” ì••ì¶• í•´ì œì˜ ëª¨ë“  ìƒíƒœë¡œ InnoDB ë²„í¼ í’€ì— ì¡´ìž¬í•  ìˆ˜ ìžˆë‹¤.
        - ê·¸ëž˜ì„œ ì•”í˜¸í™”ê°€ ë¨¼ì € ì‹¤í–‰ë˜ê³  ì••ì¶•ì´ ì ìš©ëœë‹¤ë©´ MySQL ì„œë²„ëŠ” InnoDB ë²„í¼ í’€ì— ì¡´ìž¬í•˜ëŠ” ë°ì´í„° íŽ˜ì´ì§€ì— ëŒ€í•´ì„œë„ ë§¤ë²ˆ ì•”ë³µí˜¸í™” ìž‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ ëœë‹¤.

- ì•”í˜¸í™”ëœ í…Œì´ë¸”ê³¼ ê·¸ë ‡ì§€ ì•Šì€ í…Œì´ë¸”ì˜ ë””ìŠ¤í¬ ì½ê³  ì“°ê¸°ì— ê±¸ë¦¬ëŠ” í‰ê·  ì‹œê°„
    - ì•”í˜¸í™”ëœ í…Œì´ë¸”ì˜ ê²½ìš° ì½ê¸°ëŠ” 3~5ë°° ì •ë„, ì“°ê¸°ëŠ” 5~6ë°° ëŠë¦° ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.
    
    ```bash
    mysql> SELECT (sum(sum_timer_read)/sum(count_read)) / 1000000000 AS avg_read_latency_ms
                , (sum(sum_timer_write)/sum(count_write)) / 1000000000 AS avg_write_latency_ms
             FROM performance_schema.file_summary_by_instance
            WHERE file_name LIKE '%DB_NAME/TABLE_NAME%';
    +---------------------+----------------------+
    | avg_read_latency_ms | avg_write_latency_ms |
    +---------------------+----------------------+
    |          0.14210064 |           0.03603301 |
    +---------------------+----------------------+
    ```
    
    | ì•”í˜¸í™” | í…Œì´ë¸”ëª… | í…Œì´ë¸” í¬ê¸°(GB) | Read Latency(ms) | Write Latency(ms) |
    | --- | --- | --- | --- | --- |
    | No | table_1 | 1.3 | 0.56 | 0.02 |
    | â€œ | table_2 | 2.7 | 0.16 | 0.02 |
    | â€œ | table_3 | 3.7 | 0.49 | 0.02 |
    | â€œ | table_4 | 106.6 | 0.34 | 0.02 |
    | â€œ | table_5 | 141.0 | 0.25 | 0.02 |
    | Yes | table_6 | 2.0 | 1.19 | 0.11 |
    | â€œ | table_7 | 4.8 | 1.50 | 0.13 |
    | â€œ | table_8 | 206.5 | 1.44 | 0.12 |

### 1-3. ì•”í˜¸í™”ì™€ ë³µì œ

---

- MySQL ì„œë²„ì˜ ë³µì œì—ì„œ ë ˆí”Œë¦¬ì¹´ ì„œë²„ëŠ” ì†ŒìŠ¤ ì„œë²„ì˜ ëª¨ë“  ì‚¬ìš©ìž ë°ì´í„°ë¥¼ ë™ê¸°í™”í•˜ê¸° ë•Œë¬¸ì— ì‹¤ì œ ë°ì´í„° íŒŒì¼ë„ ë™ì¼í•  ê²ƒì´ë¼ ìƒê°í•  ìˆ˜ ìžˆë‹¤. í•˜ì§€ë§Œ TDE ë¥¼ ì´ìš©í•œ ì•”í˜¸í™” ì‚¬ìš© ì‹œ ë§ˆìŠ¤í„° í‚¤ì™€ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤.
    - ë§ˆìŠ¤í„° í‚¤ ìžì²´ê°€ ë³µì œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ ë˜í•œ ë ˆí”Œë¦¬ì¹´ë¡œ ë³µì œë˜ì§€ ì•ŠëŠ”ë‹¤.
    - ì‹¤ì œ ì•”í˜¸í™”ëœ ë°ì´í„°ê°€ ì €ìž¥ëœ ë°ì´í„° íŒŒì¼ì˜ ë‚´ìš©ì€ ì™„ì „ížˆ ë‹¬ë¼ì§„ë‹¤.

- ë³µì œ ì†ŒìŠ¤ ì„œë²„ì˜ ë§ˆìŠ¤í„° í‚¤ë¥¼ ë³€ê²½í•  ë•Œ
    
    ```bash
    mysql> ALTER INSTANCE **ROTATE** INNODB MASTER KEY;
    ```
    
    - ëª…ë ¹ ìžì²´ëŠ” ë ˆí”Œë¦¬ì¹´ ì„œë²„ë¡œ ë³µì œë˜ì§€ë§Œ ì‹¤ì œ ì†ŒìŠ¤ ì„œë²„ì˜ ë§ˆìŠ¤í„° í‚¤ ìžì²´ê°€ ë ˆí”Œë¦¬ì¹´ë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ê·¸ëž˜ì„œ ë§ˆìŠ¤í„° í‚¤ ë¡œí…Œì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ì†ŒìŠ¤ ì„œë²„ì™€ ë ˆí”Œë¦¬ì¹´ ì„œë²„ê°€ ê°ê° ì„œë¡œ ë‹¤ë¥¸ ë§ˆìŠ¤í„° í‚¤ë¥¼ ìƒˆë¡œ ë°œê¸‰ë°›ëŠ”ë‹¤.
- MySQL ì„œë²„ì˜ ë°±ì—…ì—ì„œ TDE ì˜ í‚¤ë§ íŒŒì¼ì„ ë°±ì—…í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìžˆëŠ”ë°, ì´ ê²½ìš° í‚¤ë§ íŒŒì¼ì„ ì°¾ì§€ ëª»í•˜ë©´ ë°ì´í„° ë³µêµ¬ë¥¼ í•  ìˆ˜ ì—†ê²Œ ëœë‹¤.
    - ë°±ì—…ë§ˆë‹¤ í‚¤ë§ íŒŒì¼ì˜ ë°±ì—…ë„ í•¨ê»˜ ê³ ë ¤í•˜ìž.
        - í‚¤ë§ íŒŒì¼ì„ ë°ì´í„° ë°±ì—…ê³¼ ë³„ë„ë¡œ ë°±ì—…í•œë‹¤ë©´ ë§ˆìŠ¤í„° í‚¤ ë¡œí…Œì´ì…˜ ëª…ë ¹ìœ¼ë¡œ TDE ì˜ ë§ˆìŠ¤í„° í‚¤ê°€ ì–¸ì œ ë³€ê²½ëëŠ”ì§€ê¹Œì§€ ê¸°ì–µí•˜ê³  ìžˆì–´ì•¼ í•œë‹¤.
        - âœ”ï¸Â ë³´ì•ˆì„ ìœ„í•´ í‚¤ë§ íŒŒì¼ì„ ë°ì´í„° íŒŒì¼ê³¼ ë³„ë„ë¡œ ë³´ê´€í•˜ëŠ” ê²ƒì„ ê¶Œìž¥
            - ë³µêµ¬ë¥¼ ê°ì•ˆí•˜ê³  ë°±ì—… ë°©ì‹ì„ ì„ íƒí•´ì•¼ í•œë‹¤.


## 2. keyring_file í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜

- TDE ì˜ ì•”í˜¸í™” í‚¤ ê´€ë¦¬ëŠ” í”ŒëŸ¬ê·¸ì¸ ë°©ì‹ìœ¼ë¡œ ì œê³µëœë‹¤.
    
    â†’ MySQL ì»¤ë®¤ë‹ˆí‹° ì—ë””ì…˜ì€ `keyring_file` í”ŒëŸ¬ê·¸ì¸ë§Œ ê°€ëŠ¥
    

- `keyring_file` í”ŒëŸ¬ê·¸ì¸ì€ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ë¥¼ ì•”í˜¸í™”í•˜ê¸° ìœ„í•œ ë§ˆìŠ¤í„° í‚¤ë¥¼ ë””ìŠ¤í¬ì˜ íŒŒì¼ë¡œ ê´€ë¦¬í•˜ëŠ”ë°, ì´ë•Œ ë§ˆìŠ¤í„° í‚¤ëŠ” í‰ë¬¸ìœ¼ë¡œ ë””ìŠ¤í¬ì— ì €ìž¥ëœë‹¤.
    - ë§ˆìŠ¤í„° í‚¤ê°€ ì €ìž¥ëœ íŒŒì¼ì´ ì™¸ë¶€ì— ë…¸ì¶œëœë‹¤ë©´ ë°ì´í„° ì•”í˜¸í™”ëŠ” ë¬´ìš©ì§€ë¬¼ì´ ëœë‹¤.
- MySQL ì„œë²„ê°€ ì‹œìž‘ë  ë•Œë§Œ í‚¤ë§ íŒŒì¼ì„ ë‹¤ë¥¸ ì„œë²„ë¡œë¶€í„° ë‹¤ìš´ë¡œë“œí•´ì„œ ë¡œì»¬ ë””ìŠ¤í¬ì— ì €ìž¥í•œ í›„ MySQL ì„œë²„ë¥¼ ì‹œìž‘í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤í•´ë³´ìž.
    - ì¼ë‹¨ MySQL ì„œë²„ê°€ ì‹œìž‘ë˜ë©´ MySQL ì„œë²„ê°€ ë§ˆìŠ¤í„° í‚¤ë¥¼ ë©”ëª¨ë¦¬ì— ìºì‹œí•˜ê¸° ë•Œë¬¸ì— ë¡œì»¬ ë””ìŠ¤í¬ì˜ í‚¤ë§ íŒŒì¼ì„ ì‚­ì œí•´ë„ MySQL ì„œë²„ê°€ ìž‘ë™í•˜ëŠ” ë°ëŠ” ì•„ë¬´ëŸ° ë¬¸ì œê°€ ì—†ë‹¤.
    - ë§ˆìŠ¤í„° í‚¤ë¥¼ ë¡œí…Œì´ì…˜í•˜ëŠ” ê²½ìš°ì—ëŠ” ë¡œì»¬ì˜ í‚¤ë§ íŒŒì¼ì´ ìµœì‹ ì´ ë˜ë¯€ë¡œ ë‹¤ì‹œ ì™¸ë¶€ ì„œë²„ì— ë³µì‚¬í•´ ë‘¬ì•¼ í•œë‹¤.
    - Percona Server ëŠ” HashiCorp Vault ë¥¼ ì—°ë™í•˜ëŠ” í‚¤ ê´€ë¦¬ í”ŒëŸ¬ê·¸ì¸ì„ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ì œê³µí•œë‹¤.
        - MySQL ì»¤ë®¤ë‹ˆí‹° ì—ë””ì…˜ì—ì„œë„ ë¬¸ì œì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ Percona Server ì˜ `keyring_vault` í”ŒëŸ¬ê·¸ì¸ë„ í•¨ê»˜ ê²€í† í•´ë³¼ ê²ƒì„ ê¶Œìž¥í•œë‹¤.

- TDE í”ŒëŸ¬ê·¸ì¸ì˜ ê²½ìš° MySQL ì„œë²„ê°€ ì‹œìž‘ë˜ëŠ” ë‹¨ê³„ì—ì„œë„ ê°€ìž¥ ë¹¨ë¦¬ ì´ˆê¸°í™”ë¼ì•¼ í•œë‹¤.
    - MySQL ì„œë²„ì˜ ì„¤ì • íŒŒì¼(`my.cnf`)ì—ì„œÂ `early-plugin-load`ì— `keyring_file`í”ŒëŸ¬ê·¸ì¸ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬("`kering_file.so`")ë¥¼ ëª…ì‹œí•˜ë©´ ëœë‹¤.
    - ê·¸ë¦¬ê³  `keyring_file`í”ŒëŸ¬ê·¸ì¸ì´ ë§ˆìŠ¤í„° í‚¤ë¥¼ ì €ìž¥í•  í‚¤ë§ íŒŒì¼ì˜ ê²½ë¡œë¥¼Â `kering_file_data`Â ì„¤ì •ì— ëª…ì‹œí•˜ë©´ ëœë‹¤.
        - ê²½ë¡œëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ MySQL ì„œë²„ë§Œ ì°¸ì¡°í•´ì•¼ í•œë‹¤.
    
    ```bash
    # /etc/my.cnf
    early-plugin-load = keyring_file.so
    keyring_file_data = ~/pempem/tde_master.key
    ```
    
- `keyring_file` í”ŒëŸ¬ê·¸ì¸ì˜ ì´ˆê¸°í™” ì—¬ë¶€ëŠ” `SHOW PLUGINS` ëª…ë ¹ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥
    - `keyring_file` í”ŒëŸ¬ê·¸ì¸ì´ ì´ˆê¸°í™”ë˜ë©´ MySQL ì„œë²„ëŠ” í”ŒëŸ¬ê·¸ì¸ì˜ ì´ˆê¸°í™”ì™€ ë™ì‹œì— `keyring_file_data`ì‹œìŠ¤í…œ ë³€ìˆ˜ì˜ ê²½ë¡œì— ë¹ˆ íŒŒì¼ì„ ìƒì„±í•œë‹¤.
    
    ```bash
    mysql> SHOW PLUGINS;
    +---------------------------------+----------+--------------------+-----------------+---------+
    | Name                            | Status   | Type               | Library         | License |
    +---------------------------------+----------+--------------------+-----------------+---------+
    | **keyring_file                    | ACTIVE   | KEYRING            | keyring_file.so | GPL**     |
    | binlog                          | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | mysql_native_password           | ACTIVE   | AUTHENTICATION     | NULL            | GPL     |
    | sha256_password                 | ACTIVE   | AUTHENTICATION     | NULL            | GPL     |
    | caching_sha2_password           | ACTIVE   | AUTHENTICATION     | NULL            | GPL     |
    | sha2_cache_cleaner              | ACTIVE   | AUDIT              | NULL            | GPL     |
    | daemon_keyring_proxy_plugin     | ACTIVE   | DAEMON             | NULL            | GPL     |
    | CSV                             | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | MEMORY                          | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | InnoDB                          | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | INNODB_TRX                      | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_CMP                      | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_CMP_RESET                | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_CMPMEM                   | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_CMPMEM_RESET             | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_CMP_PER_INDEX            | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_CMP_PER_INDEX_RESET      | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_BUFFER_PAGE              | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_BUFFER_PAGE_LRU          | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_BUFFER_POOL_STATS        | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_TEMP_TABLE_INFO          | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_METRICS                  | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_FT_DEFAULT_STOPWORD      | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_FT_DELETED               | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_FT_BEING_DELETED         | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_FT_CONFIG                | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_FT_INDEX_CACHE           | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_FT_INDEX_TABLE           | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_TABLES                   | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_TABLESTATS               | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_INDEXES                  | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_TABLESPACES              | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_COLUMNS                  | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_VIRTUAL                  | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_CACHED_INDEXES           | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | INNODB_SESSION_TEMP_TABLESPACES | ACTIVE   | INFORMATION SCHEMA | NULL            | GPL     |
    | MyISAM                          | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | MRG_MYISAM                      | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | PERFORMANCE_SCHEMA              | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | TempTable                       | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | ARCHIVE                         | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | BLACKHOLE                       | ACTIVE   | STORAGE ENGINE     | NULL            | GPL     |
    | FEDERATED                       | DISABLED | STORAGE ENGINE     | NULL            | GPL     |
    | ngram                           | ACTIVE   | FTPARSER           | NULL            | GPL     |
    | mysqlx_cache_cleaner            | ACTIVE   | AUDIT              | NULL            | GPL     |
    | mysqlx                          | ACTIVE   | DAEMON             | NULL            | GPL     |
    +---------------------------------+----------+--------------------+-----------------+---------+
    ```
    
- ë°ì´í„° ì•”í˜¸í™” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” í…Œì´ë¸”ì„ ìƒì„±í•˜ê±°ë‚˜ ë§ˆìŠ¤í„° ë¡œí…Œì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ í‚¤ë§ íŒŒì¼ì˜ ë§ˆìŠ¤í„° í‚¤ê°€ ì´ˆê¸°í™”ëœë‹¤.
    
    ```bash
    mysql> ALTER INSTANCE ROTATE INNODB MASTER KEY;
    Query OK, 0 rows affected (0.00 sec)
    
    jenny@gim-yunhuiui-MacBookPro ~ % cat pempem/tde_master.key
    Keyring file version:2.0ï¿½0 INNODBKey-f80b57aa-c754-11eb-ba99-835a380a8991-1AESlï¿½ï¿½ï¿½6]ï¿½ï¿½/ï¿½/ï¿½
    B                                                                                         ï¿½ï¿½AvERï¿½Rï¿½3@0eï¿½EOFï¿½ï¿½K%3Mï¿½
     ï¿½ï¿½ï¿½vsï¿½DIE.ï¿½qï¿½ï¿½`ï¿½%
    ```
    

## 3. í…Œì´ë¸” ì•”í˜¸í™”

---

- í‚¤ë§ í”ŒëŸ¬ê·¸ì¸ì€ ë§ˆìŠ¤í„° í‚¤ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ê¹Œì§€ë§Œ ë‹´ë‹¹í•˜ê¸° ë•Œë¬¸ì— ì–´ë–¤ í‚¤ë§ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë“  ê´€ê³„ì—†ì´ ì•”í˜¸í™”ëœ í…Œì´ë¸”ì„ ìƒì„±í•˜ê³  í™œìš©í•˜ëŠ” ë°©ë²•ì€ ëª¨ë‘ ë™ì¼í•˜ë‹¤.

### 3-1. í…Œì´ë¸” ìƒì„±

---

- TDE ë¥¼ ì´ìš©í•˜ëŠ” í…Œì´ë¸” ìƒì„±: ì¼ë°˜ì ì¸ í…Œì´ë¸” ìƒì„± êµ¬ë¬¸ê³¼ ë™ì¼í•˜ë©°, ë§ˆì§€ë§‰ì—Â `ENCRYPTION='Y'`Â ì˜µì…˜ë§Œ ì¶”ê°€ë¡œ ë„£ìœ¼ë©´ ëœë‹¤.
    
    ```bash
    mysql> CREATE TABLE tab_encrypted (
             id INT,
             data varchar(100),
             PRIMARY KEY(id)
           ) ENCRYPTION = 'Y';
    
    mysql> INSERT INTO tab_encrypted VALUES (1, 'test_data');
    mysql> SELECT * FROM tab_encrypted;
    +----+-----------+
    | id | data      |
    +----+-----------+
    |  1 | test_data |
    +----+-----------+
    ```
    
    - ì´ì œë¶€í„° ì´ í…Œì´ë¸”ì˜ ë°ì´í„°ê°€ ë””ìŠ¤í¬ì— ê¸°ë¡ë  ë•ŒëŠ” ë°ì´í„°ê°€ ìžë™ìœ¼ë¡œ ì•”í˜¸í™”ë˜ì–´ ì €ìž¥ë˜ê³ , ë‹¤ì‹œ ë””ìŠ¤í¬ì—ì„œ ë©”ëª¨ë¦¬ë¡œ ì½ì–´ì˜¬ ë•Œ ë³µí˜¸í™”ëœë‹¤.
- ì•”í˜¸í™”ëœ í…Œì´ë¸”ë§Œ ê²€ìƒ‰í•  ë•ŒëŠ” `information_schema`ì˜ `TABLES`ë·°ë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤.
    
    ```bash
    mysql> SELECT table_schema, table_name, create_options
             FROM information_schema.tables
            WHERE table_name = 'tab_encrypted';
    +--------------+---------------+----------------+
    | TABLE_SCHEMA | TABLE_NAME    | CREATE_OPTIONS |
    +--------------+---------------+----------------+
    | test         | tab_encrypted | ENCRYPTION='Y' |
    +--------------+---------------+----------------+
    ```
    

- MySQL ì„œë²„ì˜ ëª¨ë“  í…Œì´ë¸”ì— ëŒ€í•´ ì•”í˜¸í™”ë¥¼ ì ìš©í•˜ê³ ìž í•œë‹¤ë©´Â `default_table_encryption` ì‹œìŠ¤í…œ ë³€ìˆ˜ë¥¼ ON ìœ¼ë¡œ ì„¤ì •í•˜ë©´ `ENCRYPTION`ì˜µì…˜ì„ ë³„ë„ë¡œ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ ì•”í˜¸í™”ëœ í…Œì´ë¸”ë¡œ ìƒì„±ëœë‹¤.
    
    ```bash
    mysql> SHOW VARIABLES LIKE '%default_table_encryption%';
    +--------------------------+-------+
    | Variable_name            | Value |
    +--------------------------+-------+
    | default_table_encryption | OFF   |
    +--------------------------+-------+
    ```
    

### 3-2. ì‘ìš© í”„ë¡œê·¸ëž¨ ì•”í˜¸í™”ì™€ì˜ ë¹„êµ

---

- ì‘ìš© í”„ë¡œê·¸ëž¨ì—ì„œ ì§ì ‘ ì•”í˜¸í™”í•´ì„œ MySQL ì„œë²„ì— ì €ìž¥í•˜ëŠ” ê²½ìš°ë„ ìžˆëŠ”ë°, ì´ ê²½ìš° ì €ìž¥ë˜ëŠ” ì»¬ëŸ¼ì˜ ê°’ì´ ì´ë¯¸ ì•”í˜¸í™”ëœ ê²ƒì¸ì§€ ì—¬ë¶€ë¥¼ MySQL ì„œë²„ëŠ” ì´ë¥¼ ì¸ì§€í•˜ì§€ ëª»í•œë‹¤. â†’ ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ë”ë¼ë„ ì¸ë±ìŠ¤ì˜ ê¸°ëŠ¥ì„ 100% í™œìš©í•  ìˆ˜ ì—†ë‹¤.
    
    ðŸ‘‰Â ì‘ìš© í”„ë¡œê·¸ëž¨ì˜ ì•”í˜¸í™”ì™€ MySQL ì„œë²„ì˜ ì•”í˜¸í™” ê¸°ëŠ¥ ì¤‘ ì„ íƒí•´ì•¼ í•˜ëŠ” ìƒí™©ì´ë¼ë©´ ê³ ë¯¼í•  í•„ìš” ì—†ì´ MySQL ì„œë²„ì˜ ì•”í˜¸í™” ê¸°ëŠ¥ì„ ì„ íƒí•  ê²ƒì„ ê¶Œìž¥í•œë‹¤.
    
- ì‘ìš© í”„ë¡œê·¸ëž¨ì˜ ì•”í˜¸í™”ì™€ MySQL ì„œë²„ì˜ ì•”í˜¸í™”ëŠ” ëª©ì ê³¼ ìš©ë„ê°€ ë‹¤ë¥´ë‹¤.
    - MySQL ì„œë²„ì˜ TDE ê¸°ëŠ¥ìœ¼ë¡œ ì•”í˜¸í™”í•œë‹¤ë©´ MySQL ì„œë²„ì— ë¡œê·¸ì¸ë§Œ í•  ìˆ˜ ìžˆë‹¤ë©´ ëª¨ë“  ë°ì´í„°ë¥¼ í‰ë¬¸ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.
    - í•˜ì§€ë§Œ ì‘ìš©í”„ë¡œê·¸ëž¨ ì•”í˜¸í™”ëŠ” MySQL ì„œë²„ì— ë¡œê·¸ì¸í•  ìˆ˜ ìžˆë‹¤ê³  í•˜ë”ë¼ë„ í‰ë¬¸ì˜ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ì—†ë‹¤.
- ì‘ìš© í”„ë¡œê·¸ëž¨ì—ì„œì˜ ì•”í˜¸í™” ê¸°ëŠ¥ì€ ì„œë¹„ìŠ¤ì˜ ìš”ê±´ê³¼ ì„±ëŠ¥ì„ ê³ ë ¤í•´ì„œ ì„ íƒí•´ì•¼ í•˜ê³ , MySQL ì„œë²„ì˜ ì•”í˜¸í™” ê¸°ëŠ¥ê³¼ í˜¼í•©í•´ì„œ ì‚¬ìš©í•œë‹¤ë©´ ë” ì•ˆì „í•œ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìžˆì„ ê²ƒì´ë‹¤.

### 3-3. í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ ì´ë™

---

- í…Œì´ë¸”ì„ ë‹¤ë¥¸ ì„œë²„ë¡œ ë³µì‚¬í•´ì•¼ í•˜ëŠ” ê²½ìš° ë˜ëŠ” íŠ¹ì • í…Œì´ë¸”ì˜ ë°ì´í„° íŒŒì¼ë§Œ ë°±ì—…í–ˆë‹¤ê°€ ë³µêµ¬í•˜ëŠ” ê²½ìš°ë¼ë©´ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ ì´ë™(Export & Import) ê¸°ëŠ¥ì´ ë ˆì½”ë“œë¥¼ ë¤í”„í–ˆë‹¤ê°€ ë³µêµ¬í•˜ëŠ” ë°©ì‹ë³´ë‹¤ í›¨ì”¬ íš¨ìœ¨ì ì´ê³  ë¹ ë¥´ë‹¤.
- ê·¸ëŸ°ë° TDE ê°€ ì ìš©ë˜ì–´ ì•”í˜¸í™”ëœ í…Œì´ë¸”ì˜ ê²½ìš° ì›ë³¸ MySQL ì„œë²„ì™€ ëª©ì ì§€ MySQL ì„œë²„ì˜ ì•”í˜¸í™” í‚¤(ë§ˆìŠ¤í„° í‚¤)ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— í•˜ë‚˜ ë” ì‹ ê²½ì¨ì•¼ í•  ë¶€ë¶„ì´ ìžˆë‹¤.

- ì•”í˜¸í™”ë˜ì§€ ì•Šì€ í…Œì´ë¸”ì˜ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ ë³µì‚¬ ê³¼ì •
    - `FLUSH TABLES` ëª…ë ¹ìœ¼ë¡œ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ë¥¼ ìµìŠ¤í¬íŠ¸í•  ìˆ˜ ìžˆë‹¤.
        
        ```sql
        FLUSH TABLES source_table FOR EXPORT;
        ```
        
    - ì´ ëª…ë ¹ì´ ì‹¤í–‰ë˜ë©´ MySQL ì„œë²„ëŠ” source_table ì˜ ì €ìž¥ë˜ì§€ ì•Šì€ ë³€ê²½ ì‚¬í•­ì„ ëª¨ë‘ ë””ìŠ¤í¬ë¡œ ê¸°ë¡í•˜ê³ , ë”ì´ìƒ source_table ì— ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ìž ê¸ˆì„ ê±´ë‹¤.
        
        ```sql
        mysql> FLUSH TABLES tab_encrypted FOR EXPORT;
        Query OK, 0 rows affected (0.00 sec)
        
        mysql> INSERT INTO tab_encrypted VALUES (2, 'test_data2');
        ERROR 1099 (HY000): Table 'tab_encrypted' was locked with a READ lock and can't be updated
        ```
        
    - ê·¸ì™€ ë™ì‹œì— source_table ì˜ êµ¬ì¡°ë¥¼ `source_table.cfg` íŒŒì¼ë¡œ ê¸°ë¡í•´ ë‘”ë‹¤.
    - ê·¸ëŸ¬ë©´ `source_table.ibd` íŒŒì¼ê³¼ `source_table.cfg` íŒŒì¼ì„ ëª©ì ì§€ ì„œë²„ë¡œ ë³µì‚¬í•œë‹¤.
    - ë³µì‚¬ê°€ ëª¨ë‘ ì™„ë£Œë˜ë©´ `UNLOCK TABLES` ëª…ë ¹ì„ ì‹¤í–‰í•´ source_table ì„ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ í•˜ë©´ ëœë‹¤.
        
        ```sql
        mysql> UNLOCK TABLES;
        Query OK, 0 rows affected (0.00 sec)
        
        mysql> INSERT INTO tab_encrypted VALUES (2, 'test_data2');
        Query OK, 1 row affected (0.00 sec)
        ```
        
- ì•”í˜¸í™”ëœ í…Œì´ë¸” ë³µì‚¬ê³¼ì • ðŸ‘‰ `*.cfg` íŒŒì¼ì€ ë‹¨ìˆœížˆ í…Œì´ë¸”ì˜ êµ¬ì¡°ë§Œ ê°€ì§€ê³  ìžˆê¸° ë•Œë¬¸ì— íŒŒì¼ì´ ì—†ì–´ì ¸ë„ ê²½ê³ ë§Œ ë°œìƒí•˜ê³  í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ë¥¼ ë³µêµ¬í•  ìˆ˜ ìžˆì§€ë§Œ `*.cfp` íŒŒì¼ì´ ì—†ì–´ì§€ë©´ ë³µêµ¬ê°€ ë¶ˆê°€ëŠ¥í•´ì§„ë‹¤.
    - `FLUSH TABLES source_table FOR EXPORT` ëª…ë ¹ ì‹¤í–‰ ì‹œ MySQL ì„œë²„ëŠ” ìž„ì‹œë¡œ ì‚¬ìš©í•  ë§ˆìŠ¤í„° í‚¤ë¥¼ ë°œê¸‰í•´ì„œ `source_table.cfp`ë¼ëŠ” íŒŒì¼ë¡œ ê¸°ë¡í•œë‹¤.
    - ê·¸ë¦¬ê³  ì•”í˜¸í™”ëœ í…Œì´ë¸”ì˜ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ë¥¼ ê¸°ì¡´ ë§ˆìŠ¤í„° í‚¤ë¡œ ë³µí˜¸í™”í•œ í›„, ìž„ì‹œë¡œ ë°œê¸‰í•œ ë§ˆìŠ¤í„° í‚¤ë¥¼ ì´ìš©í•´ ë‹¤ì‹œ ì•”í˜¸í™”í•´ì„œ ë°ì´í„° íŒŒì¼ì˜ í—¤ë” ë¶€ë¶„ì— ì €ìž¥í•œë‹¤.
    - í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ ì´ë™ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ë•ŒëŠ” ë°˜ë“œì‹œ ë°ì´í„° íŒŒì¼ê³¼ ìž„ì‹œ ë§ˆìŠ¤í„° í‚¤ê°€ ì €ìž¥ëœ `*.cfp` íŒŒì¼ì„ í•¨ê»˜ ë³µì‚¬í•´ì•¼ í•œë‹¤.


## 4. ì–¸ë‘ ë¡œê·¸ ë° ë¦¬ë‘ ë¡œê·¸ ì•”í˜¸í™”

- MySQL ì„œë²„ì˜ ë©”ëª¨ë¦¬ì— ì¡´ìž¬í•˜ëŠ” ë°ì´í„°ëŠ” ë³µí˜¸í™”ëœ í‰ë¬¸ìœ¼ë¡œ ê´€ë¦¬ë˜ë©°, ì´ í‰ë¬¸ ë°ì´í„°ê°€ í…Œì´ë¸”ì˜ ë°ì´í„° íŒŒì¼ ì´ì™¸ì˜ ë””ìŠ¤í¬ íŒŒì¼ë¡œ ê¸°ë¡ë˜ëŠ” ê²½ìš°ì—ëŠ” ì—¬ì „ížˆ í‰ë¬¸ìœ¼ë¡œ ì €ìž¥ëœë‹¤.
- MySQL 8.0.16 ë²„ì „ë¶€í„°ëŠ” `innodb_undo_log_encrypt`, `innodb_redo_log_encrypt` ì‹œìŠ¤í…œ ë³€ìˆ˜ë¥¼ ì´ìš©í•´ InnoDB ìŠ¤í† ë¦¬ì§€ ì—”ì§„ì˜ ë¦¬ë‘ ë¡œê·¸ì™€ ì–¸ë‘ ë¡œê·¸ë¥¼ ì•”í˜¸í™”ëœ ìƒíƒœë¡œ ì €ìž¥í•  ìˆ˜ ìžˆê²Œ ê°œì„ ëë‹¤.
    
    ```sql
    mysql> SHOW VARIABLES LIKE '%innodb_undo_log_encrypt%';
    +-------------------------+-------+
    | Variable_name           | Value |
    +-------------------------+-------+
    | innodb_undo_log_encrypt | OFF   |
    +-------------------------+-------+
    
    mysql> SHOW VARIABLES LIKE '%innodb_redo_log_encrypt%';
    +-------------------------+-------+
    | Variable_name           | Value |
    +-------------------------+-------+
    | innodb_redo_log_encrypt | OFF   |
    +-------------------------+-------+
    ```
    

- ë¦¬ë‘ ë¡œê·¸ì™€ ì–¸ë‘ ë¡œê·¸ ì•”í˜¸í™” í™œì„±í™” ë¹„í™œì„±í™”
    - í™œì„±í™” ì‹œì ì— ì €ìž¥ëœ ë¦¬ë‘ ë¡œê·¸ì™€ ì–¸ë‘ ë¡œê·¸ëŠ” ê·¸ ì‹œì ì˜ ì•”í˜¸í™” í‚¤ê°€ í•„ìš”í•˜ë‹¤. (í‚¤ ë³´ê´€ í•„ìš”)
- ë¦¬ë‘ ë¡œê·¸ì™€ ì–¸ë‘ ë¡œê·¸ ë°ì´í„° ëª¨ë‘ ê°ê°ì˜ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ë¡œ ì•”í˜¸í™”ë˜ê³ , í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ëŠ” ë‹¤ì‹œ ë§ˆìŠ¤í„° í‚¤ë¡œ ì•”í˜¸í™”ëœë‹¤.
    - ì—¬ê¸°ì„œ ì´ì•¼ê¸°í•œ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ëŠ” ì‹¤ì œ í…Œì´ë¸”ì˜ ì•”í˜¸í™”ì— ì‚¬ìš©ëœ í…Œì´ë¸”ìŠ¤íŽ˜ì´ìŠ¤ í‚¤ê°€ ì•„ë‹ˆë¼ ë¦¬ë‘ ë¡œê·¸ì™€ ì–¸ë‘ ë¡œê·¸ íŒŒì¼ì„ ìœ„í•œ í”„ë¼ì´ë¹— í‚¤ë¥¼ ì˜ë¯¸í•œë‹¤.
    - ë¦¬ë‘ ë¡œê·¸ì™€ ì–¸ë‘ ë¡œê·¸ë¥¼ ìœ„í•œ ê°ê°ì˜ í”„ë¼ì´ë¹— í‚¤ê°€ ë°œê¸‰ë˜ê³ , í•´ë‹¹ í”„ë¼ì´ë¹— í‚¤ëŠ” ë§ˆìŠ¤í„° í‚¤ë¡œ ì•”í˜¸í™”ë˜ì–´ ë¦¬ë‘ ë¡œê·¸ íŒŒì¼ê³¼ ì–¸ë‘ ë¡œê·¸ íŒŒì¼ì˜ í—¤ë”ì— ì €ìž¥ë˜ëŠ” ê²ƒì´ë‹¤.
- InnoDB ë¦¬ë‘ ë¡œê·¸ê°€ ì•”í˜¸í™”ëëŠ”ì§€
    
    ```bash
    mysql> SHOW VARIABLES LIKE '%innodb_redo_log_encrypt%';
    +-------------------------+-------+
    | Variable_name           | Value |
    +-------------------------+-------+
    | innodb_redo_log_encrypt | OFF   |
    +-------------------------+-------+
    
    mysql> SET GLOBAL innodb_redo_log_encrypt=ON;
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> INSERT INTO tab_encrypted VALUES (3, 'test_data3');
    Query OK, 1 row affected (0.00 sec)
    ```
    
    - `INSERT`ëœ ë ˆì½”ë“œì˜ ë¬¸ìžì—´ì´ InnoDB ì˜ ë¦¬ë‘ ë¡œê·¸ì— ë³´ì´ëŠ”ì§€ë§Œ í™•ì¸í•´ë³´ë©´ ëœë‹¤.
        - `grep` ëª…ë ¹ì„ ì´ìš©í•œ ë‹¨ìˆœí•œ ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ì•”í˜¸í™”ë˜ê¸° ì „ì— `INSERT`í•œ ë¬¸ìžì—´ì€ ê²€ìƒ‰ë˜ì§€ë§Œ ì•”í˜¸í™” ì´í›„ `INSERT`ëœ ë¬¸ìžì—´ì€ ê²€ìƒ‰ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.
        
        ```bash
        jenny@gim-yunhuiui-MacBookPro ~ % cd /usr/local/var/mysql
        jenny@gim-yunhuiui-MacBookPro mysql % ll
        #ib_16384_0.dblwr			binlog.000106				binlog.000118				fn_products				mysqld-auto.cnf
        #ib_16384_1.dblwr			binlog.000107				binlog.000119				fs_invoicing				performance_schema
        #innodb_temp				binlog.000108				binlog.000120				fs_nosnos_module			private_key.pem
        auto.cnf				binlog.000109				binlog.000121				gim-yunhuiui-MacBookPro.local.err	public_key.pem
        binlog.000098				binlog.000110				binlog.000122				gim-yunhuiui-MacBookPro.local.pid	server-cert.pem
        binlog.000099				binlog.000111				binlog.index				ib_buffer_pool				server-key.pem
        binlog.000100				binlog.000112				ca-key.pem				ib_logfile0				sys
        binlog.000101				binlog.000113				ca.pem					ib_logfile1				test
        binlog.000102				binlog.000114				client-cert.pem				ibdata1					undo_001
        binlog.000103				binlog.000115				client-key.pem				ibtmp1					undo_002
        binlog.000104				binlog.000116				dev_datalytics				mysql
        binlog.000105				binlog.000117				fn_partners				mysql.ibd
        
        ## grep ëª…ë ¹ì˜ ê²°ê³¼, ë¬¸ìžì—´ì´ ì¡´ìž¬í•˜ë©´ "matches"ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.
        ## ê·¸ë¦¬ê³  ê²€ìƒ‰í•œ ë¬¸ìžì—´ì´ ì¡´ìž¬í•œë‹¤ë©´ grep ëª…ë ¹ì€ ë°˜í™˜ ê°’ìœ¼ë¡œ "0"ì„ ë¦¬í„´í•œë‹¤.
        jenny@gim-yunhuiui-MacBookPro mysql % grep 'test_data2' ib_logfile0 ib_logfile1
        Binary file ib_logfile0 matches
        
        ## grep ëª…ë ¹ì˜ ê²°ê³¼, ë¬¸ìžì—´ì´ ì¡´ìž¬í•˜ì§€ ì•Šìœ¼ë©´ ì•„ë¬´ëŸ° ë©”ì‹œì§€ ì¶œë ¥ì´ ì—†ë‹¤.
        ## ê·¸ë¦¬ê³  ê²€ìƒ‰í•œ ë¬¸ìžì—´ì´ ì¡´ìž¬í•˜ì§€ ì•Šìœ¼ë©´ grep ëª…ë ¹ì€ ë°˜í™˜ ê°’ìœ¼ë¡œ "1"ì„ ë¦¬í„´í•œë‹¤.
        jenny@gim-yunhuiui-MacBookPro mysql % grep 'test_data3' ib_logfile0 ib_logfile1
        ```
        

## 5. ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™”

- í…Œì´ë¸” ì•”í˜¸í™”ê°€ ì ìš©ë¼ë„ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ì™€ ë¦´ë ˆì´ ë¡œê·¸ íŒŒì¼ ë˜í•œ ë¦¬ë‘ ë¡œê·¸ë‚˜ ì–¸ë‘ ë¡œê·¸ì²˜ëŸ¼ í‰ë¬¸ì„ ì €ìž¥í•œë‹¤.
    - ë°”ì´ë„ˆë¦¬ ë¡œê·¸ì™€ ë¦´ë ˆì´ ë¡œê·¸ íŒŒì¼ ì•”í˜¸í™” ê¸°ëŠ¥ì€ ë””ìŠ¤í¬ì— ì €ìž¥ëœ ë¡œê·¸ íŒŒì¼ì— ëŒ€í•œ ì•”í˜¸í™”ë§Œ ë‹´ë‹¹í•˜ê³ , MySQL ì„œë²„ì˜ ë©”ëª¨ë¦¬ ë‚´ë¶€ ë˜ëŠ” ì†ŒìŠ¤ ì„œë²„ì™€ ë ˆí”Œë¦¬ì¹´ ì„œë²„ ê°„ì˜ ë„¤íŠ¸ì›Œí¬ êµ¬ê°„ì—ì„œ ë¡œê·¸ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•˜ì§€ ì•ŠëŠ”ë‹¤.

â†’ ë³µì œ ë©¤ë²„ ê°„ì˜ ë„¤íŠ¸ì›Œí¬ êµ¬ê°„ì—ì„œë„ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ë¥¼ ì•”í˜¸í™”í•˜ê³ ìž í•œë‹¤ë©´ MySQL ë³µì œë¥¼ ìœ„í•œ ê³„ì •(slave)ì´ SSL ì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ë©´ ëœë‹¤.

### 5-1. ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤ ê´€ë¦¬

---

- ë°”ì´ë„ˆë¦¬ ë¡œê·¸ íŒŒì¼ì˜ ì•”í˜¸í™” ë°©ì‹
    
    ![Untitled](./images/Untitled%202.png)
    
    - ë°”ì´ë„ˆë¦¬ ë¡œê·¸ì™€ ë¦´ë ˆì´ ë¡œê·¸ íŒŒì¼ì˜ ë°ì´í„°ëŠ” íŒŒì¼ í‚¤ë¡œ ì•”í˜¸í™”í•´ì„œ ë””ìŠ¤í¬ë¡œ ì €ìž¥í•˜ê³ , íŒŒì¼ í‚¤ëŠ” â€œë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤â€(ë§ˆìŠ¤í„° í‚¤ì™€ ë™ì¼í•œ ì—­í• )ë¡œ ì•”í˜¸í™”í•´ì„œ ê° ë°”ì´ë„ˆë¦¬ ë¡œê·¸ì™€ ë¦´ë ˆì´ ë¡œê·¸ íŒŒì¼ì˜ í—¤ë”ì— ì €ìž¥ëœë‹¤.

### 5-2. ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤ ë³€ê²½

---

- ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½(ë¡œí…Œì´ì…˜)í•  ìˆ˜ ìžˆë‹¤.
    
    ```bash
    mysql> ALTER INSTANCE ROTATE BINLOG MASTER KEY;
    ```
    
- ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤ê°€ ë³€ê²½ ê³¼ì •
    1. ì¦ê°€ëœ ì‹œí€€ìŠ¤ ë²ˆí˜¸ì™€ í•¨ê»˜ ìƒˆë¡œìš´ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤ ë°œê¸‰ í›„ í‚¤ë§ íŒŒì¼ì— ì €ìž¥
    2. ë°”ì´ë„ˆë¦¬ ë¡œê·¸ íŒŒì¼ê³¼ ë¦´ë ˆì´ ë¡œê·¸ íŒŒì¼ ìŠ¤ìœ„ì¹˜ (ìƒˆë¡œìš´ ë¡œê·¸ íŒŒì¼ë¡œ ë¡œí…Œì´ì…˜)
    3. ìƒˆë¡œ ìƒì„±ë˜ëŠ” ë°”ì´ë„ˆë¦¬ ë¡œê·¸ì™€ ë¦´ë ˆì´ ë¡œê·¸ íŒŒì¼ì˜ ì•”í˜¸í™”ë¥¼ ìœ„í•´ íŒŒì¼ í‚¤ë¥¼ ìƒì„±í•˜ê³ , íŒŒì¼ í‚¤ëŠ” ë°”ì´ë„ˆë¦¬ ë¡œê·¸ íŒŒì¼ í‚¤(ë§ˆìŠ¤í„° í‚¤)ë¡œ ì•”í˜¸í™”í•´ì„œ ê° ë¡œê·¸ íŒŒì¼ì— ì €ìž¥
    4. ê¸°ì¡´ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ì™€ ë¦´ë ˆì´ ë¡œê·¸ íŒŒì¼ì˜ íŒŒì¼ í‚¤ë¥¼ ì½ì–´ì„œ ìƒˆë¡œìš´ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ íŒŒì¼ í‚¤ë¡œ ì•”í˜¸í™”í•´ì„œ ë‹¤ì‹œ ì €ìž¥(ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ë¡œê·¸ íŒŒì¼ì€ ë¬´ì‹œ)
    5. ëª¨ë“  ë°”ì´ë„ˆë¦¬ ë¡œê·¸ì™€ ë¦´ë ˆì´ ë¡œê·¸ íŒŒì¼ì´ ìƒˆë¡œìš´ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤ë¡œ ë‹¤ì‹œ ì•”í˜¸í™”ëë‹¤ë©´ ê¸°ì¡´ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤ë¥¼ í‚¤ë§ íŒŒì¼ì—ì„œ ì œê±°
- ë°”ì´ë„ˆë¦¬ ë¡œê·¸ íŒŒì¼ ì•”í˜¸í™” í™•ì¸
    
    ```bash
    mysql> SHOW BINARY LOGS;
    +---------------+-----------+-----------+
    | Log_name      | File_size | Encrypted |
    +---------------+-----------+-----------+
    | binlog.000098 |       156 | No        |
    | binlog.000099 |      7513 | No        |
    | binlog.000100 |       156 | No        |
    | binlog.000101 |       156 | No        |
    | binlog.000102 |       179 | No        |
    | binlog.000103 |       179 | No        |
    | binlog.000104 |       179 | No        |
    | binlog.000105 |       179 | No        |
    | binlog.000106 |      2530 | No        |
    | binlog.000107 |       156 | No        |
    | binlog.000108 |      3802 | No        |
    | binlog.000109 |       156 | No        |
    | binlog.000110 |       156 | No        |
    | binlog.000111 |       156 | No        |
    | binlog.000112 |       156 | No        |
    | binlog.000113 |       156 | No        |
    | binlog.000114 |      6288 | No        |
    | binlog.000115 |       156 | No        |
    | binlog.000116 |       156 | No        |
    | binlog.000117 |    446077 | No        |
    | binlog.000118 |       179 | No        |
    | binlog.000119 |       179 | No        |
    | binlog.000120 |       179 | No        |
    | binlog.000121 |       179 | No        |
    | binlog.000122 |      2722 | No        |
    +---------------+-----------+-----------+
    ```
    

### 5-3. `mysqlbinlog` ë„êµ¬ í™œìš©

---

- íŠ¸ëžœìž­ì…˜ì˜ ë‚´ìš©ì„ ì¶”ì í•˜ê±°ë‚˜ ë°±ì—… ë³µêµ¬ë¥¼ ìœ„í•´ ì•”í˜¸í™”ëœ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ë¥¼ í‰ë¬¸ìœ¼ë¡œ ë³µí˜¸í™”ê°€ í•„ìš”í•  ê²½ìš°, ë°”ì´ë„ˆë¦¬ ë¡œê·¸ ì•”í˜¸í™” í‚¤ê°€ ì—†ìœ¼ë©´ ë³µí˜¸í™”í•  ìˆ˜ ì—†ë‹¤.
- `mysqlbinlog` ë„êµ¬ë¥¼ ì´ìš©í•´ ì•”í˜¸í™”ëœ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ íŒŒì¼ì˜ ë‚´ìš©ì„ SQL ë¬¸ìž¥ìœ¼ë¡œ í•œë²ˆ í’€ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì•”í˜¸í™”ëœ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ íŒŒì¼ì„ ì§ì ‘ ì—´ì–´ ë³¼ ìˆ˜ëŠ” ì—†ë‹¤ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•œë‹¤.
    
    ```bash
    linux> mysqlbinlog -vvv mysql-bin.000011
    Enter password:
    /*!50530 SET COSESSION.PSEUDO_SLAVE_MODE=1*/;
    /*!50003 SET GOLD_COMPLETION_TYPE=COCOMPLETION_TYPE, COMPLETION_TYPE=0*/;
    DELIMITER /*!*/;
    **ERROR: Reading encrypted log files directly is not supported.**
    SET @ESESSION.GTID_NEXT= 'AUTOMATIC' /* added by mysqlbinlog */ /*!*/;
    DELIMITER;
    End of log file
    /*! 50003 SET COMPLETION_TYPE=COLD_COMPLETION_TYPE*/;
    /*!50530 SET COSESSION.PSEUDO_SLAVE_MODE=0*/;
    ```
    
- `mysqlbinlog` ë„êµ¬ê°€ MySQL ì„œë²„ì— ìš”ì²­í•´ì„œ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ë°–ì— ì—†ë‹¤.
    - ê·¸ëž˜ì„œ `mysqlbinlog` ëª…ë ¹ì„ ì‹¤í–‰í•  ë•Œ `--read-fromremote-server` íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ MySQL ì„œë²„ ì ‘ì† ì •ë³´ë¥¼ ìž…ë ¥í•œë‹¤.
    
    ```bash
    linux> mysqlbinlog --read-from-remote-server -uroot -p -vvv mysql-bin.000011
    Enter password:
    ...
    BINLOG
    c4YjXxOBAAAASQAAAH8BAACAADFpbnNlcnQgaw50byBlbmMgdmFsdWVzICgyLCdlbmNyeXBOZWRF
    YmluYXJ5IGxvZycpv4dkcA=
    c4YjXXMBAAAANWAAALYBAAAAAF SAAAAAAAEABHRIC3QAA2VuYWACAwCKAEDAQEAAgEtHm4rfQ==
    c4YjXx4BAAAAPgAAAPQBAAAAAFSAAAAAAAEAAQAC/WACAAAAFABlbmNyeXBOZWRfYmluYXJ5IGXV
    ZzSCia4=
    '/*!*/;
    ### INSERT INTO `test`.`enc`
    ### SET
    ### @1=2 /* INT meta=0 nullable=1 is null=0 */
    ### @2='encrypted_binary log' /* VARSTRING(400) meta=400 nullable=1 is_null=0 */
    ```
